{
  "resourceType": "StructureDefinition",
  "id": "UUID",
  "url": "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedurePrestazione",
  "name": "RLProcedurePrestazione",
  "status": "draft",
  "description": "Profilo contentente il dettaglio di una prestazione erogata al paziente in qualsiasi setting assistenziale.",
  "keyword": [
    {
      "system": "https://fhir.siss.regione.lombardia.it/CodeSystem/Tag",
      "code": "PI"
    }
  ],
  "fhirVersion": "4.0.1",
  "kind": "resource",
  "abstract": false,
  "type": "Procedure",
  "baseDefinition": "http://hl7.org/fhir/StructureDefinition/Procedure",
  "derivation": "constraint",
  "differential": {
    "element": [
      {
        "id": "Procedure.extension",
        "path": "Procedure.extension",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "url"
            }
          ],
          "rules": "open"
        },
        "min": 0
      },
      {
        "id": "Procedure.extension:dataPresaInCarico",
        "path": "Procedure.extension",
        "sliceName": "dataPresaInCarico",
        "short": "Data della presa in carico del paziente da parte dell'Ente Erogatore nel caso sia stata erogata in regime di ricovero domiciliare.",
        "definition": "Formato: YYYY-MM-DD secondo lo standard FHIR",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedureDataPresaInCarico"
            ]
          }
        ],
        "isModifier": false
      },
      {
        "id": "Procedure.extension:dataPresaInCarico.url",
        "path": "Procedure.extension.url",
        "fixedUri": "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedureDataPresaInCarico"
      },
      {
        "id": "Procedure.extension:dataPresaInCarico.value[x]",
        "path": "Procedure.extension.value[x]",
        "short": "Data della presa in carico del paziente da parte dell'Ente Erogatore",
        "definition": "Formato: YYYY-MM-DD secondo lo standard FHIR"
      },
      {
        "id": "Procedure.extension:modalitaErogazione",
        "path": "Procedure.extension",
        "sliceName": "modalitaErogazione",
        "short": "Codice e descrizione della modalità di erogazione della prestazione",
        "comment": "Per il dettaglio esaustivo della codifica consultare la Tabella delle modalità di erogazione contenuta nella sezione dei value-set del profilo presente nell'Implementation Guide.",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedureModalitaErogazione"
            ]
          }
        ],
        "isModifier": false
      },
      {
        "id": "Procedure.extension:modalitaErogazione.url",
        "path": "Procedure.extension.url",
        "fixedUri": "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedureModalitaErogazione"
      },
      {
        "id": "Procedure.extension:modalitaErogazione.value[x]",
        "path": "Procedure.extension.value[x]",
        "short": "Modalità di erogazione",
        "type": [
          {
            "code": "CodeableConcept"
          }
        ]
      },
      {
        "id": "Procedure.extension:modalitaErogazione.value[x].coding.code",
        "path": "Procedure.extension.value[x].coding.code",
        "short": "Codice della modalità di erogazione",
        "definition": "Codice numerico di al più 2 caratteri",
        "binding": {
          "strength": "required",
          "description": "ValueSet relativo alla modalità di erogazione",
          "valueSet": "https://fhir.siss.regione.lombardia.it/ValueSet/SIAD-ModalitaErogazione"
        }
      },
      {
        "id": "Procedure.extension:modalitaErogazione.value[x].coding.display",
        "path": "Procedure.extension.value[x].coding.display",
        "short": "Descrizione della modalità di erogazione",
        "definition": "Stringa alfanumerica di al più di 50 caratteri",
        "comment": "Le descrizioni della modalità di erogazione sono ricavate dal tracciato SIAD 3"
      },
      {
        "id": "Procedure.extension:numeroAccesso",
        "path": "Procedure.extension",
        "sliceName": "numeroAccesso",
        "short": "Questo campo è da valorizzare solo nel caso in cui la prestazione sia stata erogata in regime di ricovero domiciliare. Il valore di default è '1' ed indica che la prestazione definita nel campo 'code' erogata nella data indicata nel campo 'perfomedDateTime' è stata effettuata durante il primo accesso giornaliero dell'opertore. Nel caso in cui la stessa prestazione venga erogata più volte nell'arco della stessa giornata tramite accessi domiciliari multipli questo campo deve essere valorizzazo in modo incrementale coerentemente al numero di accesso. Si specifica che deve sempre essere creata un'istanza del per ogni singola prestazione, anche se questa sia erogata più volte durante lo stesso accesso domiciliare.",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedureNumeroAccesso"
            ]
          }
        ],
        "isModifier": false
      },
      {
        "id": "Procedure.extension:tipoAccesso",
        "path": "Procedure.extension",
        "sliceName": "tipoAccesso",
        "short": "Tipo di accesso",
        "comment": "Per il dettaglio esaustivo della codifica consultare la Tabella del tipo di accesso contenuta nella sezione dei value-set del profilo presente nell'Implementation Guide.",
        "min": 0,
        "max": "1",
        "type": [
          {
            "code": "Extension",
            "profile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedureTipoAccesso"
            ]
          }
        ],
        "isModifier": false
      },
      {
        "id": "Procedure.extension:tipoAccesso.url",
        "path": "Procedure.extension.url",
        "fixedUri": "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLProcedureTipoAccesso"
      },
      {
        "id": "Procedure.extension:tipoAccesso.value[x]",
        "path": "Procedure.extension.value[x]",
        "type": [
          {
            "code": "CodeableConcept"
          }
        ]
      },
      {
        "id": "Procedure.extension:tipoAccesso.value[x].coding.code",
        "path": "Procedure.extension.value[x].coding.code",
        "short": "Codice del tipo di accesso",
        "definition": "Stringa numerica di una cifra",
        "binding": {
          "strength": "required",
          "description": "ValueSet relativo alla codifica del tipo di accesso",
          "valueSet": "https://fhir.siss.regione.lombardia.it/ValueSet/SIAD-TipoAccesso"
        }
      },
      {
        "id": "Procedure.basedOn",
        "path": "Procedure.basedOn",
        "slicing": {
          "discriminator": [
            {
              "type": "value",
              "path": "reference"
            }
          ],
          "rules": "open"
        }
      },
      {
        "id": "Procedure.basedOn:RLServiceRequestServiziSocioAssistenziali",
        "path": "Procedure.basedOn",
        "sliceName": "RLServiceRequestServiziSocioAssistenziali",
        "short": "Riferimento alla richiesta di attivazione delle cure domiciliari",
        "definition": "Reference al profilo RLServiceRequestServiziSocioAssistenziali contente i dettagli della richiesta di attivazione delle cure domiciliari",
        "comment": "Campo da compilare nel caso in cui la prestazione sia erogata in setting assistenziale domiciliare",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLServiceRequestServiziSocioAssistenziali"
            ]
          }
        ]
      },
      {
        "id": "Procedure.basedOn:RLCarePlanProgettoIndividuale",
        "path": "Procedure.basedOn",
        "sliceName": "RLCarePlanProgettoIndividuale",
        "short": "Riferimento al progetto individuale contentente la richiesta di attivazione delle cure domiciliari",
        "definition": "Reference al profilo RLCarePlanProgettoIndividuale contente il progetto individuale del paziente",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLCarePlanProgettoIndividuale"
            ]
          }
        ]
      },
      {
        "id": "Procedure.status",
        "path": "Procedure.status",
        "short": "Stato della prestazione",
        "definition": "Valore fisso su \"completed\"",
        "fixedCode": "completed"
      },
      {
        "id": "Procedure.code",
        "path": "Procedure.code",
        "short": "Codice e descrizione della prestazione",
        "comment": "Per il dettaglio esaustivo della codifica consultare la Tabella delle tipologie di prestazioni contenuta nella sezione dei value-set del profilo presente nell'Implementation Guide."
      },
      {
        "id": "Procedure.code.coding.code",
        "path": "Procedure.code.coding.code",
        "short": "Codice della prestazione",
        "definition": "Stringa alfanumerica di 10 caratteri",
        "binding": {
          "strength": "required",
          "description": "ValueSet relativo alla tipologia di prestazione",
          "valueSet": "https://fhir.siss.regione.lombardia.it/ValueSet/SIAD-TipologiaPrestazione"
        }
      },
      {
        "id": "Procedure.code.coding.display",
        "path": "Procedure.code.coding.display",
        "short": "Descrizione della prestazione",
        "definition": "Stringa alfanumerica di al più di 200 caratteri"
      },
      {
        "id": "Procedure.subject",
        "path": "Procedure.subject",
        "short": "Paziente al quale deve essere erogata la prestazione",
        "definition": "Reference alla risorsa RLPatientCittadino contenente i dettagli anagrafici del paziente",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLPatientCittadino"
            ]
          }
        ]
      },
      {
        "id": "Procedure.performed[x]",
        "path": "Procedure.performed[x]",
        "short": "Data (e ora, se disponibile) in cui la prestazione è stata erogata al paziente",
        "definition": "Formato: YYYY-MM-DD secondo lo standard FHIR. \r\nNel caso in cui fosse disponibile anche l'ora compilare con il formato: YYYY-MM-DDThh:mm:ss+zz:zz secondo lo standard FHIR",
        "type": [
          {
            "code": "dateTime"
          }
        ]
      },
      {
        "id": "Procedure.performer",
        "path": "Procedure.performer",
        "short": "Operatore sanitario che ha erogato la prestazione"
      },
      {
        "id": "Procedure.performer.function",
        "path": "Procedure.performer.function",
        "short": "Nel caso di una prestazione erogata in regime di ricovero domiciliare questo campo contiene la tipologia di operatore che ha effettuato la prestazione",
        "definition": "Codice numerico di un carattere",
        "comment": "Per il dettaglio esaustivo della codifica consultare la Tabella delle tipologie degli operatori ADI contenuta nella sezione dei value-set del profilo presente nell'Implementation Guide."
      },
      {
        "id": "Procedure.performer.function.coding",
        "path": "Procedure.performer.function.coding",
        "short": "Tipologia di operatore che ha effettuato la prestazione"
      },
      {
        "id": "Procedure.performer.function.coding.code",
        "path": "Procedure.performer.function.coding.code",
        "short": "Codice tipologia di operatore che ha effettuato la prestazione",
        "binding": {
          "strength": "required",
          "description": "ValueSet relativo alla tipologia di operatore ADI",
          "valueSet": "https://fhir.siss.regione.lombardia.it/ValueSet/SIAD-TipoOperatore"
        }
      },
      {
        "id": "Procedure.performer.function.coding.display",
        "path": "Procedure.performer.function.coding.display",
        "short": "Descrizione tipologia di operatore che ha effettuato la prestazione"
      },
      {
        "id": "Procedure.performer.actor",
        "path": "Procedure.performer.actor",
        "short": "Nel caso di una prestazione erogata in regime di ricovero domiciliare questo campo contiene la tipologia di operatore che ha effettuato la prestazione",
        "definition": "Reference al profilo RLPractitionerRoleOperatoreADI",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLPractitionerRoleOperatoreADI"
            ]
          }
        ]
      },
      {
        "id": "Procedure.location",
        "path": "Procedure.location",
        "short": "Reference alla tipologia di luogo in cui  le prestazioni vengono erogate. Attulalmente il riferimento deifinsce solo le tipologie inerenti alla prestazioni erogate agli assisititi in regime di ricovero domicilare",
        "definition": "Reference al profilo RLLocationLuogoPrestazioneCureDom",
        "type": [
          {
            "code": "Reference",
            "targetProfile": [
              "https://fhir.siss.regione.lombardia.it/StructureDefinition/RLLocationLuogoPrestazioneCureDom"
            ]
          }
        ]
      }
    ]
  }
}